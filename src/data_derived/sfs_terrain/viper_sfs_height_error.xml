<?xml version="1.0" encoding="UTF-8"?>
<?xml-model href="https://pds.nasa.gov/pds4/pds/v1/PDS4_PDS_1N00.sch" schematypens="http://purl.oclc.org/dsdl/schematron"?>
<?xml-model href="https://pds.nasa.gov/pds4/disp/v1/PDS4_DISP_1N00_1510.sch" schematypens="http://purl.oclc.org/dsdl/schematron"?>
<?xml-model href="https://pds.nasa.gov/pds4/cart/v1/PDS4_CART_1N00_1970.sch" schematypens="http://purl.oclc.org/dsdl/schematron"?>
<?xml-model href="https://pds.nasa.gov/pds4/proc/v1/PDS4_PROC_1N00_1300.sch" schematypens="http://purl.oclc.org/dsdl/schematron"?>
<Product_Observational xmlns="http://pds.nasa.gov/pds4/pds/v1" xmlns:pds="http://pds.nasa.gov/pds4/pds/v1" xmlns:disp="http://pds.nasa.gov/pds4/disp/v1" xmlns:cart="http://pds.nasa.gov/pds4/cart/v1" xmlns:proc="http://pds.nasa.gov/pds4/proc/v1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="
    http://pds.nasa.gov/pds4/pds/v1 https://pds.nasa.gov/pds4/pds/v1/PDS4_PDS_1N00.xsd
    http://pds.nasa.gov/pds4/disp/v1 https://pds.nasa.gov/pds4/disp/v1/PDS4_DISP_1N00_1510.xsd
    http://pds.nasa.gov/pds4/cart/v1 https://pds.nasa.gov/pds4/cart/v1/PDS4_CART_1N00_1970.xsd
    http://pds.nasa.gov/pds4/proc/v1 https://pds.nasa.gov/pds4/proc/v1/PDS4_PROC_1N00_1300.xsd">
  <Identification_Area>
    <logical_identifier>urn:nasa:pds:viper_geospatial:data_derived:viper_sfs_height_error</logical_identifier>
    <version_id>999.1</version_id>
    <title>VIPER Shape from Shading (SfS) Digital Elevation Model (DEM) Height Error Map</title>
    <information_model_version>1.23.0.0</information_model_version>
    <product_class>Product_Observational</product_class>
    <Modification_History>
      <Modification_Detail>
        <modification_date>2025-02-25</modification_date>
        <version_id>999.1</version_id>
      <description>Dumb information model forces this to be a 'valid' version instead of 0.1 for testing, which should be allowed.  First draft of label.</description>
      </Modification_Detail>
    </Modification_History>
  </Identification_Area>
  <Observation_Area>
    <Time_Coordinates>
      <start_date_time xsi:nil="true" nilReason="inapplicable" />
      <stop_date_time xsi:nil="true" nilReason="inapplicable" />
      </Time_Coordinates>
    <Primary_Result_Summary>
      <purpose>Science</purpose>
      <processing_level>Derived</processing_level>
      <description>
        A height uncertainty product derived from creating simulated images by taking the SfS DEM and illuminating it in a manner similar to each source image.  This height-error map has the maximum height perturbation at each pixel, in meters, which will make at least one of the simulated images at that pixel change by more than twice the discrepancy between the unperturbed simulated image and the measured image.  This is an ad-hoc relative measure which is larger where the SfS DEM is less accurate.  This is a 32-bit GeoTIFF.  Areas that were not illuminated by any source image have their pixels set to the no-data value.
      </description>
    </Primary_Result_Summary>
    <Investigation_Area>
      <name>VIPER</name>
      <type>Mission</type>
      <Internal_Reference>
        <lid_reference>urn:nasa:pds:viper</lid_reference>
        <reference_type>data_to_investigation</reference_type>
      </Internal_Reference>
    </Investigation_Area>
    <Observing_System>
      <Observing_System_Component>
        <name>Lunar Reconnaissance Orbiter Camera</name>
        <type>Instrument</type>
      </Observing_System_Component>
    </Observing_System>
    <Target_Identification>
      <name>Moon</name>
      <type>Satellite</type>
      <Internal_Reference>
        <lid_reference>urn:nasa:pds:context:target:satellite.earth.moon</lid_reference>
        <reference_type>data_to_target</reference_type>
      </Internal_Reference>
    </Target_Identification>
    <Discipline_Area>
      <disp:Display_Settings>
        <Local_Internal_Reference>
          <local_identifier_reference>image</local_identifier_reference>
          <local_reference_type>display_settings_to_array</local_reference_type>
        </Local_Internal_Reference>
        <disp:Display_Direction>
          <disp:horizontal_display_axis>Sample</disp:horizontal_display_axis>
          <disp:horizontal_display_direction>Left to Right</disp:horizontal_display_direction>
          <disp:vertical_display_axis>Line</disp:vertical_display_axis>
          <disp:vertical_display_direction>Top to Bottom</disp:vertical_display_direction>
        </disp:Display_Direction>
      </disp:Display_Settings>
      <cart:Cartography>
        <Local_Internal_Reference>
          <local_identifier_reference>image</local_identifier_reference>
          <local_reference_type>cartography_parameters_to_image_object</local_reference_type>
        </Local_Internal_Reference>
        <cart:Spatial_Domain>
          <cart:Bounding_Coordinates>
            <cart:west_bounding_coordinate unit="deg">27.6932315518034642</cart:west_bounding_coordinate>
            <cart:east_bounding_coordinate unit="deg">33.7278089134552843</cart:east_bounding_coordinate>
            <cart:north_bounding_coordinate unit="deg">-85.1391556303045576</cart:north_bounding_coordinate>
            <cart:south_bounding_coordinate unit="deg">-85.5088944835956255</cart:south_bounding_coordinate>
          </cart:Bounding_Coordinates>
        </cart:Spatial_Domain>
        <cart:Spatial_Reference_Information>
          <cart:Horizontal_Coordinate_System_Definition>
            <cart:Planar>
              <cart:Map_Projection>
                <cart:map_projection_name>Stereographic</cart:map_projection_name>
                <cart:Stereographic>
                  <cart:longitude_of_central_meridian unit="deg">31.6218</cart:longitude_of_central_meridian>
                  <cart:latitude_of_projection_origin unit="deg">-85.42088</cart:latitude_of_projection_origin>
                  <cart:scale_factor_at_projection_origin>1</cart:scale_factor_at_projection_origin>
                </cart:Stereographic>
              </cart:Map_Projection>
              <cart:Planar_Coordinate_Information>
                <cart:planar_coordinate_encoding_method>Coordinate Pair</cart:planar_coordinate_encoding_method>
                <cart:Coordinate_Representation>
                  <cart:pixel_resolution_x unit="m/pixel">1</cart:pixel_resolution_x>
                  <cart:pixel_resolution_y unit="m/pixel">1</cart:pixel_resolution_y>
                  <cart:pixel_scale_x unit="pixel/deg">30323.3504241494811</cart:pixel_scale_x>
                  <cart:pixel_scale_y unit="pixel/deg">30323.3504241494811</cart:pixel_scale_y>
                </cart:Coordinate_Representation>
              </cart:Planar_Coordinate_Information>
              <cart:Geo_Transformation>
                <cart:upperleft_corner_x unit="m">-9336.5</cart:upperleft_corner_x>
                <cart:upperleft_corner_y unit="m">8247.5</cart:upperleft_corner_y>
              </cart:Geo_Transformation>
            </cart:Planar>
            <cart:Geodetic_Model>
              <cart:latitude_type>Planetocentric</cart:latitude_type>
              <cart:spheroid_name>Moon (2015) - Sphere</cart:spheroid_name>
              <cart:a_axis_radius unit="m">1737400</cart:a_axis_radius>
              <cart:b_axis_radius unit="m">1737400</cart:b_axis_radius>
              <cart:c_axis_radius unit="m">1737400</cart:c_axis_radius>
              <cart:longitude_direction>Positive East</cart:longitude_direction>
            </cart:Geodetic_Model>
          </cart:Horizontal_Coordinate_System_Definition>
        </cart:Spatial_Reference_Information>
      </cart:Cartography>
      <proc:Processing_Information>
        <Local_Internal_Reference>
          <local_identifier_reference>image</local_identifier_reference>
          <local_reference_type>processing_information_to_data_object</local_reference_type>
        </Local_Internal_Reference>
          <proc:Process>
            <proc:name>Estimate SfS Height Errors</proc:name>
            <proc:description>This is the processing step that takes as input the SfS terrain and the LROC images to produce this height estimate.</proc:description>
            <proc:process_owner_name>Oleg Alexandrov and Ross Beyer</proc:process_owner_name>
            <proc:process_owner_institution_name>NASA Ames Research Center</proc:process_owner_institution_name>
            <proc:Software>
              <proc:name>NASA Ames Stereo Pipeline</proc:name>
              <proc:software_version_id>3.2.0</proc:software_version_id>
              <proc:software_availability>Open source</proc:software_availability>
              <proc:software_type>C++</proc:software_type>
              <proc:Software_Program>
              <proc:name>sfs</proc:name>
                <proc:description>The ASP program is run again, this time with the --estimate-height-errors option to produce the height error map.  The parameters listed here are not complete, but are the relevant parameters to sfs for this computation.
                </proc:description>
                <proc:Software_Program_Parameters>
                  <proc:Parameter>
                    <proc:name>--estimate-height-errors</proc:name>
                    <proc:parameter_type>Input</proc:parameter_type>
                    <proc:value>None, this option is a flag only.</proc:value>
                  </proc:Parameter>
                  <proc:Parameter>
                    <proc:name>--input-dem</proc:name>
                    <proc:parameter_type>Input</proc:parameter_type>
                    <proc:value>viper_sfs_dem.tif</proc:value>
                  </proc:Parameter>
                </proc:Software_Program_Parameters>
              </proc:Software_Program>
            </proc:Software>
          </proc:Process>
      </proc:Processing_Information>
    </Discipline_Area>
  </Observation_Area>
  <Reference_List>
    <External_Reference>
      <doi>10.3847/PSJ/??????</doi>
      <reference_text>Beyer et al. (to be submitted), VIPER Site Analysis, PSJ</reference_text>
      <description>This paper provides a description of the methods and process used to produce this SfS DEM.</description>
    </External_Reference>
    <External_Reference>
      <doi>10.1029/2018EA000409</doi>
      <reference_text>Beyer, Ross A., Oleg Alexandrov, and Scott McMichael. 2018. The Ames Stereo Pipeline: NASA’s open source software for deriving and processing terrain data. Earth and Space Science, 5.</reference_text>
      <description>This paper provides a description of the NASA ASP software.</description>
    </External_Reference>
    <External_Reference>
      <doi>10.1029/2018EA000390</doi>
      <reference_text>Alexandrov, O. and Beyer, R. A. (2018). Multiview shape-from-shading for planetary images. Earth and Space Science, 5, 652–666.</reference_text>
      <description>This paper provides a description of the SfS process in NASA ASP.</description>
    </External_Reference>
    <External_Reference>
      <doi>10.5281/zenodo.7497499</doi>
      <reference_text>Oleg Alexandrov, et al. (2023). NeoGeographyToolkit/StereoPipeline: ASP 3.2.0 (3.2.0). Zenodo.</reference_text>
      <description>This is the DOI for the version of the NASA ASP software used to produce this product.</description>
    </External_Reference>
    <Source_Product_Internal>
      <lidvid_reference>urn:nasa:pds:viper_geospatial:data_derived:viper_sfs_dem::1.0</lidvid_reference>
      <reference_type>data_to_derived_source_product</reference_type>
    </Source_Product_Internal>
  </Reference_List>
  <File_Area_Observational>
    <File>
      <file_name>viper_sfs_height_error.tif</file_name>
    </File>
    <Header>
      <offset unit="byte">0</offset>
      <object_length unit="byte">66654</object_length>
      <parsing_standard_id>TIFF 6.0</parsing_standard_id>
      <description>TIFF/GeoTIFF header. The TIFF/GeoTIFF format is used throughout the geospatial and science communities to share geographic image data. </description>
    </Header>
    <Array_3D_Image>
      <local_identifier>image</local_identifier>
      <offset unit="byte">66654</offset>
      <axes>3</axes>
      <axis_index_order>Last Index Fastest</axis_index_order>
      <Element_Array>
        <data_type>IEEE754LSBSingle</data_type>
      </Element_Array>
      <Axis_Array>
        <axis_name>Band</axis_name>
        <elements>1</elements>
        <sequence_number>1</sequence_number>
      </Axis_Array>
      <Axis_Array>
        <axis_name>Line</axis_name>
        <elements>11008</elements>
        <sequence_number>2</sequence_number>
      </Axis_Array>
      <Axis_Array>
        <axis_name>Sample</axis_name>
        <elements>14336</elements>
        <sequence_number>3</sequence_number>
      </Axis_Array>
      <Special_Constants>
        <missing_constant>-1</missing_constant>
      </Special_Constants>
    </Array_3D_Image>
  </File_Area_Observational>
</Product_Observational>
